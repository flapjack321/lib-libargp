From 21ef26eac546acf6ce80533ef02c943902efa450 Mon Sep 17 00:00:00 2001
From: Ethan Cotterell <ethancotterell@gmail.com>
Date: Thu, 27 May 2021 10:49:45 +0100
Subject: [PATCH 5/5] argp: remove unsupported progname functions

---
 gnulib/gllib/argp-namefrob.h |  8 ++++----
 gnulib/gllib/argp-parse.c    | 12 ++++++------
 2 files changed, 10 insertions(+), 10 deletions(-)

diff --git a/gnulib/gllib/argp-namefrob.h b/gnulib/gllib/argp-namefrob.h
index 022b880..f99e20e 100644
--- a/gnulib/gllib/argp-namefrob.h
+++ b/gnulib/gllib/argp-namefrob.h
@@ -150,8 +150,8 @@ extern char *__argp_base_name (const char *arg);
 # define __argp_base_name last_component
 #endif
 
-#if defined _LIBC || HAVE_DECL_PROGRAM_INVOCATION_SHORT_NAME
-# define __argp_short_program_name()    (program_invocation_short_name)
-#else
+// #if defined _LIBC || HAVE_DECL_PROGRAM_INVOCATION_SHORT_NAME
+// # define __argp_short_program_name()    (program_invocation_short_name)
+// #else
 extern char *__argp_short_program_name (void);
-#endif
+// #endif
diff --git a/gnulib/gllib/argp-parse.c b/gnulib/gllib/argp-parse.c
index 9645fe3..200edd0 100644
--- a/gnulib/gllib/argp-parse.c
+++ b/gnulib/gllib/argp-parse.c
@@ -101,9 +101,9 @@ argp_default_parser (int key, char *arg, struct argp_state *state)
       break;
 
     case OPT_PROGNAME:          /* Set the program name.  */
-#if defined _LIBC || HAVE_DECL_PROGRAM_INVOCATION_NAME
-      program_invocation_name = arg;
-#endif
+// #if defined _LIBC || HAVE_DECL_PROGRAM_INVOCATION_NAME
+//       program_invocation_name = arg;
+// #endif
       /* [Note that some systems only have PROGRAM_INVOCATION_SHORT_NAME (aka
          __PROGNAME), in which case, PROGRAM_INVOCATION_NAME is just defined
          to be that, so we have to be a bit careful here.]  */
@@ -111,9 +111,9 @@ argp_default_parser (int key, char *arg, struct argp_state *state)
       /* Update what we use for messages.  */
       state->name = __argp_base_name (arg);
 
-#if defined _LIBC || HAVE_DECL_PROGRAM_INVOCATION_SHORT_NAME
-      program_invocation_short_name = state->name;
-#endif
+// #if defined _LIBC || HAVE_DECL_PROGRAM_INVOCATION_SHORT_NAME
+//       program_invocation_short_name = state->name;
+// #endif
 
       if ((state->flags & (ARGP_PARSE_ARGV0 | ARGP_NO_ERRS))
           == ARGP_PARSE_ARGV0)
-- 
2.25.1

